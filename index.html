<!DOCTYPE html><html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Coin - Ù†Ø³Ø®Ù‡ 0.0.4</title>
  <style>
    body { background: #fffbe6; font-family: Tahoma, sans-serif; text-align: center; padding: 20px; color: #333; }
    body.dark { background-color: #121212; color: #eee; }
    #loginDiv, #gameDiv { max-width:480px; margin:auto; }
    input[type="text"] { font-size:1.1rem; padding:10px; width:90%; margin-bottom:15px; border-radius:5px; border:1px solid #ccc; }
    button { font-size:1rem; padding:8px 20px; background:#c29200; border:none; color:#fff; border-radius:5px; cursor:pointer; margin:5px; }
    button:hover { background:#a17300; }
    #coin { width:150px; cursor:pointer; user-select:none; margin-top:10px; transition:transform .2s; }
    #coin.clicked { animation:bounce .3s; }
    @keyframes bounce {0%{transform:scale(1) rotate(0deg);}30%{transform:scale(1.2) translateY(-20px) rotate(20deg);}60%{transform:scale(1.1) translateY(10px) rotate(-20deg);}100%{transform:scale(1) rotate(0deg);} }
    #count,#blackCoins { font-size:1.4rem; margin-top:15px; font-weight:bold; }
    #leaderboard { margin-top:25px; text-align:right; }
    table{width:100%;border-collapse:collapse;font-size:0.9rem;}th,td{border:1px solid #c29200;padding:6px;}th{background:#f3d87f;}
    #shop,#dailyChallenge,#clickChallenge{margin-top:30px;border-top:2px solid #c29200;padding-top:15px;}
    .floor-btn{margin:5px;}
    .hidden{display:none;}
    #footer{margin-top:40px;font-size:.9rem;color:#666;}
    #trafficLight { width:60px; height:160px; background:#333; border-radius:15px; margin:20px auto; padding:10px; }
    .light { width:40px; height:40px; border-radius:50%; margin:10px auto; background:#111; }
    .green { background:green; }
    .red { background:red; }
    .yellow { background:orange; }
  </style>
</head>
<body>
<div id="loginDiv">
  <h2>Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ! Ø§Ø³Ù…â€ŒØªÙˆ ÙˆØ§Ø±Ø¯ Ú©Ù† ğŸ‘‡</h2>
  <input type="text" id="username" placeholder="Ø§Ø³Ù… Ú©Ø§Ø±Ø¨Ø±" />
  <br><button onclick="login()">ÙˆØ±ÙˆØ¯</button>
</div>
<div id="gameDiv" style="display:none;">
  <h2>Ø³Ù„Ø§Ù… <span id="displayName"></span>!</h2>
  <img id="coin" src="https://i.postimg.cc/nrWTP5cb/coin-pixel.png" alt="Ø³Ú©Ù‡" onclick="addCoin()" />
  <div id="count">ØªØ¹Ø¯Ø§Ø¯ Ø³Ú©Ù‡: 0</div>
  <div id="blackCoins">Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡: 0</div>
  <div id="leaderboard">
    <h3>ğŸ† Ø¬Ø¯ÙˆÙ„ Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ</h3>
    <table><thead><tr><th>Ø±ØªØ¨Ù‡</th><th>Ø§Ø³Ù…</th><th>Ø³Ú©Ù‡</th></tr></thead>
    <tbody id="leaderboardBody"></tbody></table>
  </div>
  <div id="shop">
    <h3>ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h3>
    <p>ØªÙ… Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯: Û³Û´ Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡</p>
    <button onclick="buyDarkMode()">Ø®Ø±ÛŒØ¯ Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯</button>
    <button onclick="toggleDarkMode()">ØªØºÛŒÛŒØ± ØªÙ…</button>
  </div>
  <div id="dailyChallenge">
    <h3>ğŸ  Ú†Ø§Ù„Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡</h3>
    <div id="floorsContainer"></div>
  </div>
  <div id="clickChallenge">
    <h3>ğŸ¯ Ú†Ø§Ù„Ø´ Ú©Ù„ÛŒÚ© - Ú†Ø±Ø§Øº Ø±Ø§Ù‡Ù†Ù…Ø§</h3>
    <p>ØªÙˆØ¶ÛŒØ­: Ø¨Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª 1000 Ø³Ú©Ù‡ ÙˆØ§Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÛŒØŒ Ú†Ø±Ø§Øº Ú©Ù‡ Ø³Ø¨Ø² Ø¨ÙˆØ¯ Ø³Ø±ÛŒØ¹ Ú©Ù„ÛŒÚ© Ú©Ù†. Ù‡Ø± Ú©Ù„ÛŒÚ© Ø¯Ø± Ø­Ø§Ù„Øª Ø³Ø¨Ø² = 1 Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡. Ø§Ú¯Ù‡ Ù‚Ø±Ù…Ø² Ø¨Ø²Ù†ÛŒØŒ Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡Ø§Øª Ù…ÛŒâ€ŒØ³ÙˆØ²Ù‡!</p>
    <button onclick="startClickChallenge()">Ø´Ø±ÙˆØ¹ Ú†Ø§Ù„Ø´ (1000 Ø³Ú©Ù‡)</button>
    <div id="trafficLight" class="hidden">
      <div id="light1" class="light"></div>
      <div id="light2" class="light"></div>
      <div id="light3" class="light"></div>
    </div>
    <button id="clickBtn" class="hidden" onclick="handleClickChallenge()">Ú©Ù„ÛŒÚ© Ú©Ù†!</button>
  </div>
  <div id="footer">Ù†Ø³Ø®Ù‡: 0.0.4 | Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ ØªÙˆØ³Ø· Rob Lucci</div>
</div>
<script>
let currentUser=null,usersData=JSON.parse(localStorage.getItem("happyCoinUsers")||"{}"),usedCheatCodes=JSON.parse(localStorage.getItem("usedCheatCodes")||"[]");
const maxFloor=5,floorBase=1000;
function initUserData(n){if(!usersData[n])usersData[n]={coins:0,blackCoins:0,floorsBought:0,darkModeBought:!1,darkModeActive:!1,token:'_'+Math.random().toString(36).substr(2,9)};saveData()}
function login(){let n=document.getElementById("username").value.trim();if(n.length<2)return alert("Ø§Ø³Ù… Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û² Ø­Ø±Ù Ø¨Ø§Ø´Ø¯");currentUser=n;initUserData(n);localStorage.setItem("happyCoinCurrentUser",n);loginFinish()}
function loginFinish(){document.getElementById("loginDiv").style.display="none";document.getElementById("gameDiv").style.display="block";updateUI();renderFloors()}
function saveData(){localStorage.setItem("happyCoinUsers",JSON.stringify(usersData));localStorage.setItem("usedCheatCodes",JSON.stringify(usedCheatCodes))}
function updateUI(){document.getElementById("displayName").innerText=currentUser;updateCoinCount();updateBlackCoins();renderLeaderboard();updateDarkMode()}
function updateCoinCount(){document.getElementById("count").innerText="ØªØ¹Ø¯Ø§Ø¯ Ø³Ú©Ù‡: "+usersData[currentUser].coins}
function updateBlackCoins(){document.getElementById("blackCoins").innerText="Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡: "+usersData[currentUser].blackCoins}
function addCoin(){let u=usersData[currentUser];u.coins++;if(u.coins%15==0)u.blackCoins++;saveData();updateUI();document.getElementById("coin").classList.add("clicked");setTimeout(()=>document.getElementById("coin").classList.remove("clicked"),300)}
function renderLeaderboard(){let t="",arr=Object.entries(usersData).sort((a,b)=>b[1].coins-a[1].coins);arr.forEach((e,i)=>t+=`<tr><td>${i+1}</td><td>${e[0]}</td><td>${e[1].coins}</td></tr>`);document.getElementById("leaderboardBody").innerHTML=t}
function buyDarkMode(){let u=usersData[currentUser];if(u.blackCoins>=34){u.blackCoins-=34;u.darkModeBought=!0;u.darkModeActive=!0;saveData();updateUI();alert("Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯ ÙØ¹Ø§Ù„ Ø´Ø¯!")}else alert("Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª!")}
function toggleDarkMode(){let u=usersData[currentUser];if(u.darkModeBought){u.darkModeActive=!u.darkModeActive;saveData();updateUI()}else alert("Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø®Ø±ÛŒ!")}
function updateDarkMode(){document.body.classList.toggle("dark",usersData[currentUser].darkModeActive)}
function renderFloors(){let c="",u=usersData[currentUser];for(let i=1;i<=maxFloor;i++){let cost=floorBase*i,bought=i<=u.floorsBought;c+=`<button class='floor-btn' onclick='buyFloor(${i})' ${bought?"disabled":""}>${bought?"âœ…":"ğŸª™"}Ø·Ø¨Ù‚Ù‡ ${i} - ${cost} Ø³Ú©Ù‡</button>`}document.getElementById("floorsContainer").innerHTML=c}
function buyFloor(i){let u=usersData[currentUser],cost=floorBase*i;if(u.coins>=cost){u.coins-=cost;u.blackCoins+=15;u.floorsBought=i;saveData();updateUI();renderFloors();alert(`Ø·Ø¨Ù‚Ù‡ ${i} Ø¨Ø§Ø² Ø´Ø¯ Ùˆ Û±Ûµ Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡ Ú¯Ø±ÙØªÛŒ!`)}else alert("Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª!")}
function startClickChallenge(){let u=usersData[currentUser];if(u.coins<1000)return alert("Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª");u.coins-=1000;saveData();updateUI();runTrafficLight()}
let lightState="red",clickBtn=document.getElementById("clickBtn"),lightDivs=["light1","light2","light3"],earnedClicks=0;
function runTrafficLight(){document.getElementById("trafficLight").classList.remove("hidden");clickBtn.classList.remove("hidden");let cycle=()=>{lightDivs.forEach(id=>document.getElementById(id).className="light");let r=Math.random();if(r<0.05){lightState="yellow";document.getElementById("light2").classList.add("yellow");setTimeout(cycle,400)}else if(r<0.55){lightState="green";document.getElementById("light3").classList.add("green");setTimeout(cycle,1500)}else{lightState="red";document.getElementById("light1").classList.add("red");setTimeout(cycle,1500)}};cycle()}
function handleClickChallenge(){let u=usersData[currentUser];if(lightState=="green"){u.blackCoins++;earnedClicks++;saveData();updateBlackCoins()}else if(lightState=="red"){u.blackCoins=0;alert("Ø¨Ø§Ø®ØªÛŒ! Ù‡Ù…Ù‡ Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡Ø§Øª Ø³ÙˆØ®Øª!");saveData();updateBlackCoins();clickBtn.classList.add("hidden");document.getElementById("trafficLight").classList.add("hidden")}}
window.onload=()=>{let s=localStorage.getItem("happyCoinCurrentUser");if(s&&usersData[s]){currentUser=s;loginFinish()}}
</script>
</body>
</html>
