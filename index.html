<!DOCTYPE html><html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Coin - Ù†Ø³Ø®Ù‡ 0.2.0</title>
  <!-- Vazir Font -->
  <link href="https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.css" rel="stylesheet">
  <!-- CryptoJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    body { background: #fffbe6; font-family:'Vazir', monospace; text-align:center; padding:20px; color:#333; transition:background .5s, color .5s; }
    body.dark { background:#121212; color:#eee; }
    #loginDiv,#gameDiv{max-width:480px;margin:auto;}
    h1,h2,h3{color:#c29200;text-shadow:2px 2px 0 #7a5700;}
    button{background:#c29200;border:none;color:#fff;padding:8px 16px;margin:5px;border-radius:4px;cursor:pointer;box-shadow:2px 2px 0 #7a5700;transition:background .3s;}
    button:hover{background:#a17300;}
    #coin {width:150px;height:150px;cursor:pointer;border-radius:50%;image-rendering:pixelated;transition:transform .15s;}
    #coin.clicked{transform:scale(1.1) rotate(10deg);}
    #count,#blackCoins,#timer{font-size:14px;margin:10px 0;color:#7a5700;text-shadow:1px 1px 0 #f0e68c;}
    #shop,#dailyChallenge,#miniGameSection,#eventDiv,#cheatDiv{margin-top:20px;padding:10px;border:2px solid #c29200;border-radius:6px;background:#fff8d6;}
    .floor-btn{margin:3px;}
    .tooltip{display:none;position:absolute;background:#333;color:#fff;padding:6px;border-radius:4px;font-size:12px;max-width:200px;z-index:100;}
    /* Event button neon effect */
    #eventBtn{position:fixed;top:20px;right:20px;padding:10px 20px;font-size:14px;box-shadow:0 0 8px #fffbe6,0 0 16px #c29200,0 0 24px #7a5700;animation:neon 1.5s ease-in-out infinite alternate;}
    @keyframes neon{from{box-shadow:0 0 4px #fffbe6,0 0 8px #c29200;}to{box-shadow:0 0 12px #fff,0 0 24px #ff4500;}}
    /* Event game */
    #eventGame{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);color:#fff;overflow:auto;}
    #eventGame .container{max-width:500px;margin:50px auto;padding:20px;background:#222;border-radius:8px;}
    .window-item{display:inline-block;width:80px;height:80px;margin:10px;background:#444;position:relative;}
    .window-item img{width:100%;height:100%;object-fit:cover;}
  </style>
</head>
<body>
  <!-- Login -->
  <div id="loginDiv">
    <h2>Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ! Ø§Ø³Ù…â€ŒØªÙˆ ÙˆØ§Ø±Ø¯ Ú©Ù†</h2>
    <input type="text" id="username" placeholder="Ø§Ø³Ù… Ú©Ø§Ø±Ø¨Ø±" />
    <br><button onclick="login()">ÙˆØ±ÙˆØ¯</button>
  </div>  <!-- Game UI -->  <div id="gameDiv" style="display:none;">
    <h2>Ø³Ù„Ø§Ù… <span id="displayName"></span>!</h2>
    <img id="coin" src="https://i.postimg.cc/nrWTP5cb/coin-pixel.png" alt="Ø³Ú©Ù‡" onclick="addCoin()" />
    <div id="count">ØªØ¹Ø¯Ø§Ø¯ Ø³Ú©Ù‡: 0</div>
    <div id="blackCoins">Ø³Ú©Ù‡ Ø³ÛŒØ§Ù‡: 0</div><div id="shop">
  <h3>ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h3>
  <button onclick="toggleDarkMode()">ØªØºÛŒÛŒØ± ØªÙ… (Ø±Ø§ÛŒÚ¯Ø§Ù†)</button>
</div>

<div id="dailyChallenge">
  <h3>ğŸ  Ø®Ø±ÛŒØ¯ Ø·Ø¨Ù‚Ø§Øª</h3>
  <div id="floorsContainer"></div>
</div>

<div id="miniGameSection">
  <h3>ğŸ® Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø·Ø¨Ù‚Ù‡â€ŒÙ‡Ø§</h3>
  <div id="miniGameContainer"></div>
</div>

<div id="cheatDiv">
  <button onclick="toggleCheatInput()">Ú©Ø¯ ØªÙ‚Ù„Ø¨</button>
  <div id="cheatInputDiv" style="display:none; margin-top:10px;">
    <input id="cheatCode" placeholder="Ú©Ø¯ Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†" />
    <button onclick="applyCheat()">Ø§Ø¹Ù…Ø§Ù„ Ú©Ø¯</button>
  </div>
</div>

<div id="footer">Ù†Ø³Ø®Ù‡:0.2.0 | Rob Lucci</div>

  </div>  <!-- Event Button --><button id="eventBtn" onclick="openEvent()">Ø§ÛŒÙˆÙ†Øª</button>

  <!-- Event Game Overlay -->  <div id="eventGame">
    <div class="container">
      <h2>Ú†Ø§Ù„Ø´ Ø§ÛŒÙˆÙ†Øª</h2>
      <p>Ø±Ø§Ù‡Ù†Ù…Ø§: Ø¯Ø§Ø®Ù„ 60 Ø«Ø§Ù†ÛŒÙ‡ØŒ Ø§Ú¯Ø± Ø³Ø§ÛŒÙ‡â€ŒÛŒ <strong style="color:#fff;">Ø³ÙÛŒØ¯</strong> Ø¯ÛŒØ¯ÛŒ "Ù†ÙˆØ±" Ø¨Ø²Ù†ØŒ Ø§Ú¯Ø± "Ø³ÛŒØ§Ù‡" Ø¯ÛŒØ¯ÛŒ "Ø¨Ø¨Ù†Ø¯". 5 Ù¾Ù†Ø¬Ø±Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.</p>
      <div id="eventTimer">Ø²Ù…Ø§Ù†: 60</div>
      <div id="windowsContainer"></div>
      <button onclick="closeEvent()">Ø®Ø±ÙˆØ¬</button>
    </div>
  </div><script>
  // Data and storage
  let currentUser=null; let usersData=JSON.parse(localStorage.getItem("happyCoinUsers")||"{}"); let usedCheatCodes=JSON.parse(localStorage.getItem("usedCheatCodes")||"[]");
  function saveData(){localStorage.setItem("happyCoinUsers",JSON.stringify(usersData)); localStorage.setItem("usedCheatCodes",JSON.stringify(usedCheatCodes));}

  // Init & Login
  function initUserData(name){ if(!usersData[name]) usersData[name]={coins:0,blackCoins:0,floorsBought:0,darkModeActive:false}; saveData(); }
  function login(){ let name=prompt('Ø§Ø³Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:'); if(!name||name.trim().length<2) return alert('Ø§Ø³Ù… Ø¨Ø§ÛŒØ¯ Û² Ø­Ø±Ù ÛŒØ§ Ø¨ÛŒØ´ØªØ± Ø¨Ø§Ø´Ø¯'); currentUser=name.trim(); initUserData(currentUser); localStorage.setItem('happyCoinCurrentUser',currentUser); showGame(); }
  window.onload=()=>{ let s=localStorage.getItem('happyCoinCurrentUser'); if(s){ currentUser=s; initUserData(s); showGame(); }};
  function showGame(){ document.getElementById('loginDiv').style.display='none'; document.getElementById('gameDiv').style.display='block'; updateUI(); renderFloors(); renderMiniGameButtons(); }

  // UI Update
  function updateUI(){ let u=usersData[currentUser]; document.getElementById('displayName').innerText=currentUser; document.getElementById('count').innerText='Ø³Ú©Ù‡: '+u.coins; document.getElementById('blackCoins').innerText='Ø³ÛŒØ§Ù‡: '+u.blackCoins; document.body.classList.toggle('dark',u.darkModeActive);}

  // Coin click
  function addCoin(){ let u=usersData[currentUser]; u.coins++; if(u.coins%15===0) u.blackCoins++; saveData(); updateUI(); let c=document.getElementById('coin'); c.classList.add('clicked'); setTimeout(()=>c.classList.remove('clicked'),300); }

  // Dark mode
  function toggleDarkMode(){ let u=usersData[currentUser]; u.darkModeActive=!u.darkModeActive; saveData(); updateUI(); }

  // Floors
  const maxFloor=5, floorBase=1000;
  function renderFloors(){ let u=usersData[currentUser], html=''; for(let i=1;i<=maxFloor;i++){ let cost=floorBase*i, bought=i<=u.floorsBought; html+=`<button ${bought?'disabled':''} onclick='buyFloor(${i})'>${bought?'âœ…':'ğŸª™'} Ø·Ø¨Ù‚Ù‡ ${i} - ${cost} Ø³Ú©Ù‡</button>`;} document.getElementById('floorsContainer').innerHTML=html; }
  function buyFloor(i){ let u=usersData[currentUser], cost=floorBase*i; if(u.coins<cost) return alert('Ø³Ú©Ù‡ Ú©Ù…'); u.coins-=cost; u.floorsBought=Math.max(u.floorsBought,i); saveData(); updateUI(); renderFloors(); renderMiniGameButtons(); alert('Ø·Ø¨Ù‚Ù‡ '+i+' Ø®Ø±ÛŒØ¯Ù‡ Ø´Ø¯'); }

  // Mini-games
  function renderMiniGameButtons(){ let u=usersData[currentUser], container=document.getElementById('miniGameContainer'); container.innerHTML=''; for(let i=1;i<=u.floorsBought;i++){ let btn=document.createElement('button'); btn.innerText='Ø¨Ø§Ø²ÛŒ '+i; btn.onclick=()=>playFloorGame(i); container.appendChild(btn);} }
  function playFloorGame(f){ let win=confirm('Ø¨Ø§Ø²ÛŒ Ø·Ø¨Ù‚Ù‡ '+f+' Ø´Ø±ÙˆØ¹ Ø´Ø¯! Ø¢ÛŒØ§ Ø¨Ø±Ø¯ÛŒØŸ'); if(win){ let u=usersData[currentUser]; u.coins+=500; saveData(); updateUI(); alert('500 Ø³Ú©Ù‡ Ú¯Ø±ÙØªÛŒØ¯!'); }}

  // Cheat
  function toggleCheatInput(){ let d=document.getElementById('cheatInputDiv'); d.style.display=d.style.display==='none'?'block':'none'; }
  function applyCheat(){ let code=prompt('Ú©Ø¯ ØªÙ‚Ù„Ø¨:').toLowerCase(), u=usersData[currentUser]; if(!code) return; if(usedCheatCodes.includes(currentUser+'_'+code)) return alert('Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡'); if(code==='fff') u.coins+=600; else if(code==='ff') u.blackCoins+=25; else if(code==='cp9'){u.coins+=1000;u.blackCoins+=30;} else if(code==='ty'){u.coins+=2000;u.blackCoins+=50;} else return alert('Ø§Ø´ØªØ¨Ø§Ù‡'); usedCheatCodes.push(currentUser+'_'+code); saveData(); updateUI(); alert('Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯'); }

  // Event Game
  let eventTimer, eventTime=60;
  function openEvent(){ document.getElementById('eventGame').style.display='block'; startEvent(); }
  function closeEvent(){ clearInterval(eventTimer); document.getElementById('eventGame').style.display='none'; }
  function startEvent(){ eventTime=60; document.getElementById('eventTimer').innerText='Ø²Ù…Ø§Ù†: '+eventTime; let wc=document.getElementById('windowsContainer'); wc.innerHTML=''; // create windows
    for(let i=0;i<5;i++){ let w=document.createElement('div'); w.className='window-item'; w.id='w'+i; wc.appendChild(w);} eventTimer=setInterval(()=>{
      if(eventTime<=0){ endEvent(true); return;} eventTime--; document.getElementById('eventTimer').innerText='Ø²Ù…Ø§Ù†: '+eventTime;
      // random shadow and buttons
      let idx=Math.floor(Math.random()*5), type=Math.random()<0.5?'white':'black'; let w=document.getElementById('w'+idx);
      w.innerHTML=`<p style="position:absolute;top:5px;left:5px;color:${type};font-size:14px;">${type==='white'?'â—¯':'â—‰'}</p>`+
        `<button onclick="handleEvent('${type}')">${type==='white'?'Ù†ÙˆØ±':'Ø¨Ø¨Ù†Ø¯'}</button>`;
    },3000);
  }
  function handleEvent(type){ if(type==='black') return endEvent(false); /* close correct*/ }
  function endEvent(win){ clearInterval(eventTimer); closeEvent(); if(win){ let u=usersData[currentUser]; u.coins+=1000; u.blackCoins+=35; saveData(); updateUI(); alert('ØªØ¨Ø±ÛŒÚ©! 1000 Ø³Ú©Ù‡ Ùˆ 35 Ø³ÛŒØ§Ù‡ Ú¯Ø±ÙØªÛŒØ¯'); } else alert('Ø¨Ø§Ø®ØªÛŒØ¯!'); }
</script></body>
</html>
