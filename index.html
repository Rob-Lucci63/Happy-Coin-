<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<title>Happy Coin - سیستم ساده سکه سیاه</title>
<style>
  body {
    background: #fffbe6;
    font-family: Tahoma, sans-serif;
    text-align: center;
    padding: 40px 20px;
  }
  body.dark {
    background-color: #121212;
    color: #eee;
  }
  #coin {
    width: 150px;
    cursor: pointer;
    user-select: none;
    transition: transform 0.2s ease;
  }
  #coin.clicked {
    animation: bounce 0.3s ease;
  }
  @keyframes bounce {
    0% { transform: scale(1) rotate(0deg); }
    30% { transform: scale(1.2) translateY(-20px) rotate(20deg); }
    60% { transform: scale(1.1) translateY(10px) rotate(-20deg); }
    100% { transform: scale(1) rotate(0deg); }
  }
  #info {
    font-size: 1.5rem;
    margin-top: 20px;
    color: #444;
  }
  #shop {
    margin-top: 30px;
  }
  button {
    font-size: 1.1rem;
    padding: 10px 20px;
    background-color: #c29200;
    border: none;
    border-radius: 5px;
    color: white;
    cursor: pointer;
    margin: 5px;
  }
  button:hover {
    background-color: #a17300;
  }
</style>
</head>
<body>

<h2>Happy Coin - سیستم ساده سکه سیاه</h2>
<img id="coin" src="https://i.postimg.cc/nrWTP5cb/coin-pixel.png" alt="سکه" onclick="addCoin()" />
<div id="info"></div>

<div id="shop">
  <h3>🛒 فروشگاه</h3>
  <p>تم دارک مود: ۳۴ سکه سیاه</p>
  <button onclick="buyDarkMode()">خرید دارک مود</button>
  <button onclick="toggleDarkMode()">تغییر تم</button>
</div>

<script>
  let data = JSON.parse(localStorage.getItem("simpleCoinData") || '{"clicks":0,"blackCoins":0,"darkModeBought":false,"darkModeActive":false}');

  function updateDisplay() {
    document.getElementById("info").innerText = 
      `کلیک: ${data.clicks} | سکه سیاه: ${data.blackCoins}`;
  }

  function addCoin() {
    data.clicks++;
    if (data.clicks % 15 === 0) {
      data.blackCoins++;
      alert("تبریک! 1 سکه سیاه گرفتی!");
    }
    localStorage.setItem("simpleCoinData", JSON.stringify(data));
    updateDisplay();

    let coin = document.getElementById("coin");
    coin.classList.add("clicked");
    setTimeout(() => coin.classList.remove("clicked"), 300);
  }

  function buyDarkMode() {
    if (data.blackCoins >= 34) {
      data.blackCoins -= 34;
      data.darkModeBought = true;
      data.darkModeActive = true;
      localStorage.setItem("simpleCoinData", JSON.stringify(data));
      updateDisplay();
      updateDarkMode();
      alert("تم دارک مود خریداری و فعال شد!");
    } else {
      alert("سکه سیاه کافی نیست!");
    }
  }

  function toggleDarkMode() {
    if (data.darkModeBought) {
      data.darkModeActive = !data.darkModeActive;
      localStorage.setItem("simpleCoinData", JSON.stringify(data));
      updateDarkMode();
    } else {
      alert("ابتدا باید تم دارک مود را بخری!");
    }
  }

  function updateDarkMode() {
    if (data.darkModeActive) {
      document.body.classList.add("dark");
    } else {
      document.body.classList.remove("dark");
    }
  }

  updateDisplay();
  updateDarkMode();
</script>

</body>
</html>
